<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.tc.mapper.FeedMapper">

	<select id="feedSelect" parameterType="com.tc.model.feedDTO"
		resultType="com.tc.model.feedDTO">
		select *
		from CHALLENGES
	</select>
	
	<!-- 피드 삽입 sql문 -->
	<insert id="upload" parameterType="com.tc.model.feedDTO">
		INSERT INTO CHALLENGES
		VALUES
		(chal_idx.nextval,#{chal_title},#{chal_content},SYSDATE,SYSDATE+2,#{user_id},
		<if test="img !=null">#{img}</if>
		<if test="img == null">NULL</if>
		)
	</insert>

	<!-- 피드 전체 정보 가져오기 sql -->
	<select id="getFeed" resultType="com.tc.model.feedDTO">
		SELECT U.USER_NICK,U.USER_PROFILE,CH.CHAL_TITLE,CH.IMG
		FROM USERS U JOIN CHALLENGES CH
		ON U.USER_ID = CH.USER_ID
	</select>

	<select id="detailFeed" resultType="com.tc.model.feedDTO">
		SELECT U.USER_NICK,U.USER_PROFILE,
		CH.CHAL_TITLE,CH.CHAL_CONTENT,CH.IMG,CH.CHAL_ST_DT,CH.CHAL_ED_DT
		FROM USERS U JOIN CHALLENGES CH
		ON U.USER_ID = CH.USER_ID
	</select>
</mapper>

